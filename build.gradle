/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.5.1/samples
 * This project uses @Incubating APIs which are subject to change.
 */

/*
* This file was generated by the Gradle 'init' task.
*/

apply plugin: 'war'


sourceSets {
    test {
        java {
            srcDirs = ['src/test/java']
        }
    }
}

repositories {
    mavenLocal()
    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }
}

dependencies {
    //implementation 'com.google.code.gson:gson:2.10.1'
    //implementation project(':shared')
    implementation group: 'org.postgresql', name: 'postgresql', version: '42.7.1'


    implementation 'org.bouncycastle:bcpkix-jdk18on:1.72'
    implementation 'org.bouncycastle:bcprov-jdk18on:1.72'

    implementation 'org.apache.logging.log4j:log4j-api:2.20.0'
    implementation 'org.apache.logging.log4j:log4j-core:2.20.0'

    implementation group: 'com.zaxxer', name: 'HikariCP', version: '5.1.0'

    testImplementation 'org.junit.jupiter:junit-jupiter:5.7.1'
    testRuntimeOnly 'org.junit.platform:junit-platform-launcher'

    implementation group: 'org.springframework', name: 'spring-core', version: '6.1.1'
    implementation group: 'org.springframework', name: 'spring-context', version: '6.1.1'
    implementation group: 'org.springframework', name: 'spring-beans', version: '6.1.1'
    implementation group: 'org.springframework', name: 'spring-webmvc', version: '6.1.1'
    implementation 'org.springframework:spring-jdbc:6.1.1'
    testImplementation group: 'org.springframework', name: 'spring-test', version: '6.1.1'

    implementation 'org.springframework.boot:spring-boot-starter-validation:3.2.0'
    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf:3.2.0'
    implementation 'org.springframework.boot:spring-boot-starter-tomcat:3.2.0'
    implementation 'org.springframework.boot:spring-boot-starter-web:3.2.0'
    implementation 'org.springframework.boot:spring-boot-starter-actuator:3.2.0'



    compileOnly 'org.projectlombok:lombok:1.18.30'
    annotationProcessor 'org.projectlombok:lombok:1.18.30'

    implementation 'org.mapstruct:mapstruct:1.5.5.Final'
    annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.5.Final'

    implementation 'com.thetransactioncompany:cors-filter:1.3.2'

    implementation group: 'com.google.guava', name: 'guava', version: '33.0.0-jre'
}


group = 'Cerberus'
version = '0.0.1-SNAPSHOT'
description = 'Cerberus'
java.sourceCompatibility = JavaVersion.VERSION_17


tasks.named('test', Test) {
    useJUnitPlatform()

    maxHeapSize = '1G'

    testLogging {
        events "started", "passed", "skipped", "failed"
    }
}

tasks.withType(JavaCompile) {
    options.compilerArgs << "-parameters"
    options.compilerArgs << "-Xlint:deprecation"
}


test {
    include "**/Test*.class"
    include "**/*Test.class"
    include "**/*Test.class"
    include "**/*TestCase.class"
}

war {
    archiveFileName = 'cerberus.war'
    destinationDirectory = new File("/home/hexi/apache-tomcat-10.1.13/webapps")
}

//jar {
//    manifest {
//        attributes(
//                'Main-Class': 'Main',
//                'Multi-Release': 'true'
//        )
//    }
// }
